<!DOCTYPE html>
<html lang="tr">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <meta name="description" content="Güvenli ilaç kullanımını sağlamaya yardımcı olan ilaç etkileşim denetleyici hizmeti">
    
    <!-- Security Headers -->
    <meta http-equiv="Content-Security-Policy" content="
        default-src 'self';
        script-src 'self' 'unsafe-inline' https://cdn.jsdelivr.net;
        style-src 'self' 'unsafe-inline' https://cdn.jsdelivr.net;
        font-src 'self' https://cdn.jsdelivr.net;
        connect-src 'self' https://api.fda.gov https://api.openai.com https://api.anthropic.com https://api.perplexity.ai https://generativelanguage.googleapis.com https://ipapi.co https://ip-api.com https://api.ipify.org;
        img-src 'self' data:;
        object-src 'none';
        frame-src 'none';
        base-uri 'self';
        form-action 'self';
        upgrade-insecure-requests;
    ">
    <meta http-equiv="X-Content-Type-Options" content="nosniff">
    
    <meta http-equiv="X-XSS-Protection" content="1; mode=block">
    <meta http-equiv="Referrer-Policy" content="strict-origin-when-cross-origin">
    <meta http-equiv="Permissions-Policy" content="camera=(), microphone=(), geolocation=(), payment=()">
    
    <link rel="stylesheet" href="https://cdn.jsdelivr.net/gh/orioncactus/pretendard@v1.3.9/dist/web/static/pretendard.css" integrity="sha384-..." crossorigin="anonymous">
    <link rel="stylesheet" href="/en-us/styles.css?v=1.0">
    
    <!-- 인라인 CSS 테스트 -->
    <style>
        /* CSS 로딩 테스트 - 이 스타일이 보이면 CSS가 정상 로드됨 */
        body {
            background-color: #ffffff !important;
        }
        
        @media (prefers-color-scheme: dark) {
            body {
                background-color: #1a1a1a !important;
            }
        }
    </style>
    
    <!-- 기본 파비콘 (라이트 모드용) -->
    <link rel="icon" type="image/png" href="../logo/dark.png">
    
    <!-- 다크 모드용 파비콘 -->
    <link rel="icon" type="image/png" href="../logo/white.png" media="(prefers-color-scheme: dark)">
    
    <title>İlaç Etkileşim Denetleyicisi</title>
</head>
<body class="preload">
    <!-- Loading Overlay -->
    <div id="loadingOverlay" class="loading-overlay">
        <div class="loading-content">
            <div class="loading-spinner"></div>
            <p id="loadingText" style="margin-top: 1rem;">İşleniyor...</p>
        </div>
    </div>

    <!-- Drug Detail Information Modal -->
    <div id="drugDetailModal" class="modal">
        <div class="modal-content">
            <div class="modal-header">
                <h3 class="modal-title" id="drugDetailTitle"></h3>
                <button class="modal-close" onclick="closeDrugDetail()" aria-label="Kapat">×</button>
            </div>
            <div class="modal-body" id="drugDetailBody"></div>
        </div>
    </div>

    <!-- Settings Modal -->
    <div id="settingsModal" class="settings-modal">
        <div class="settings-content">
            <div class="settings-header">
                <h3 class="settings-title">
                    🤖 AI Analiz Ayarları
                </h3>
                <button class="modal-close" onclick="closeSettings()" aria-label="Kapat">×</button>
            </div>
            <div class="settings-body">
                <!-- AI Service Selection -->
                <div class="form-group">
                    <label for="aiProvider" class="form-label">🎯 Kullanılacak AI Hizmeti</label>
                    <select id="aiProvider" class="form-select">
                        <option value="free">🆓 Ücretsiz AI Hizmeti (Varsayılan)</option>
                        <option value="openai">OpenAI (GPT-4o-mini)</option>
                        <option value="claude">Anthropic Claude</option>
                        <option value="perplexity">Perplexity AI</option>
                        <option value="gemini">Google Gemini</option>
                        <option value="auto">🎲 Otomatik Seçim (Mevcut)</option>
                    </select>
                    <div class="form-help">
                        Ücretsiz AI hizmeti varsayılan olarak sağlanır. Daha yüksek kaliteli analiz için kişisel API anahtarlarınızı girin.
                    </div>
                </div>
                
                <!-- Free AI Service Information -->
                <div class="form-group ai-config" data-provider="free">
                    <div class="free-ai-info">
                        <h4>🆓 Ücretsiz AI Hizmeti</h4>
                        <p>Bu hizmet aşağıdaki ücretsiz AI API'lerini kullanır:</p>
                        <ul>
                            <li><strong>Hugging Face Inference API</strong> - Açık kaynak modelleri</li>
                            <li><strong>Ollama API</strong> - Yerel yürütme modelleri</li>
                            <li><strong>Groq API</strong> - Hızlı çıkarım hizmeti</li>
                        </ul>
                        <div class="license-info">
                            <h5>📄 Lisans Bilgileri</h5>
                            <p>Ücretsiz AI hizmeti aşağıdaki koşullar altında sağlanır:</p>
                            <ul>
                                <li>Günlük kullanım limiti: 100 istek</li>
                                <li>Yanıt süresi limiti: 30 saniye</li>
                                <li>Ticari kullanım kısıtlamaları</li>
                                <li>Veri güvenliği: Giriş verileri işleme sırasında şifrelenir</li>
                            </ul>
                        </div>
                    </div>
                </div>

                <div class="form-group ai-config" data-provider="openai">
                    <label for="openaiApiKey" class="form-label">
                        <span class="provider-icon" alt="OpenAI"> 
                        OpenAI API Anahtarı
                    </label>
                    <input type="password" 
                           id="openaiApiKey" 
                           class="form-input" 
                           placeholder="sk-..."
                           aria-label="OpenAI API Anahtarı">
                    <div class="form-help">
                        <a href="https://platform.openai.com/api-keys" target="_blank" rel="noopener" style="color: var(--primary);">
                            OpenAI sitesinden OpenAI API Anahtarı alın →
                        </a>
                    </div>
                </div>

                <!-- Claude Settings -->
                <div class="form-group ai-config" data-provider="claude">
                    <label for="claudeApiKey" class="form-label">
                        Anthropic Claude API Anahtarı
                    </label>
                    <input type="password" 
                           id="claudeApiKey" 
                           class="form-input" 
                           placeholder="sk-ant-..."
                           aria-label="Claude API Anahtarı">
                    <div class="form-help">
                        <a href="https://console.anthropic.com/" target="_blank" rel="noopener" style="color: var(--primary);">
                            Anthropic konsolundan Anthropic API Anahtarı alın →
                        </a>
                    </div>
                </div>

                <!-- Perplexity Settings -->
                <div class="form-group ai-config" data-provider="perplexity">
                    <label for="perplexityApiKey" class="form-label">
                        Perplexity API Anahtarı
                    </label>
                    <input type="password" 
                           id="perplexityApiKey" 
                           class="form-input" 
                           placeholder="pplx-..."
                           aria-label="Perplexity API Anahtarı">
                    <div class="form-help">
                        <a href="https://www.perplexity.ai/settings/api" target="_blank" rel="noopener" style="color: var(--primary);">
                        </a>
                    </div>
                </div>

                <!-- Gemini Settings -->
                <div class="form-group ai-config" data-provider="gemini">
                    <label for="geminiApiKey" class="form-label">
                        Google Gemini API Anahtarı
                    </label>
                    <input type="password" 
                           id="geminiApiKey" 
                           class="form-input" 
                           placeholder="AI..."
                           aria-label="Gemini API Anahtarı">
                    <div class="form-help">
                        <a href="https://aistudio.google.com/app/apikey" target="_blank" rel="noopener" style="color: var(--primary);">
                            Google AI Studio'dan Gemini API Anahtarı alın →
                        </a>
                    </div>
                </div>

                <!-- Status Display -->
                <div class="api-status">
                    <h4>🔑 API Anahtarı Durumu</h4>
                    <div class="status-grid">
                        <div class="status-item" id="openai-status">
                            <span class="status-icon">⚪</span>
                            <span>OpenAI</span>
                        </div>
                        <div class="status-item" id="claude-status">
                            <span class="status-icon">⚪</span>
                            <span>Claude</span>
                        </div>
                        <div class="status-item" id="perplexity-status">
                            <span class="status-icon">⚪</span>
                            <span>Perplexity</span>
                        </div>
                        <div class="status-item" id="gemini-status">
                            <span class="status-icon">⚪</span>
                            <span>Gemini</span>
                        </div>
                    </div>
                </div>
            </div>
            <div class="settings-actions">
                <button class="btn btn-secondary" onclick="closeSettings()">İptal</button>
                <button class="btn btn-primary" onclick="saveSettings()">Kaydet</button>
                <button class="btn btn-secondary" onclick="testAllAPIs()">🧪 API Testi</button>
            </div>
        </div>
    </div>

    <!-- Feedback Modal -->
    <div id="feedbackModal" class="modal">
        <div class="modal-content">
            <div class="modal-header">
                <h3 class="modal-title">Geri Bildirim Gönder</h3>
                <button class="modal-close" onclick="closeFeedbackModal()" aria-label="Kapat">×</button>
            </div>
            <div class="modal-body">
                <form id="feedbackForm" class="feedback-form">
                    <div class="form-group">
                        <label for="feedbackName" class="form-label">Ad</label>
                        <input type="text" 
                               id="feedbackName" 
                               class="form-input" 
                               placeholder="Adınızı girin"
                               required
                               aria-label="Ad">
                    </div>
                    
                    <div class="form-group">
                        <label for="feedbackEmail" class="form-label">E-posta</label>
                        <input type="email" 
                               id="feedbackEmail" 
                               class="form-input" 
                               placeholder="E-postanızı girin"
                               required
                               aria-label="E-posta">
                    </div>
                    
                    <div class="form-group">
                        <label for="feedbackSubject" class="form-label">Konu</label>
                        <input type="text" 
                               id="feedbackSubject" 
                               class="form-input" 
                               placeholder="Geri bildirim konusunu girin"
                               required
                               aria-label="Konu">
                    </div>
                    
                    <div class="form-group">
                        <label for="feedbackMessage" class="form-label">Mesaj</label>
                        <textarea id="feedbackMessage" 
                                  class="form-textarea" 
                                  placeholder="Geri bildiriminizi girin"
                                  rows="5"
                                  required
                                  aria-label="Mesaj"></textarea>
                    </div>
                    
                    <div class="form-actions">
                        <button type="button" class="btn btn-secondary" onclick="closeFeedbackModal()">İptal</button>
                        <button type="submit" class="btn btn-primary">Gönder</button>
                    </div>
                </form>
            </div>
        </div>
    </div>

    <!-- Main Container -->
    <div class="container">
        <!-- Header -->
        <header class="header scroll-fade">
            <h1>İlaç Etkileşim Denetleyicisi</h1>
            <p>Güvenli kullanım için<br>ilaçlar arasındaki etkileşimi kontrol edin</p>
        </header>

        <!-- Drug Search Section -->
        <section class="card scroll-hidden scroll-delay-1">
            <h2 class="sr-only">İlaç Arama</h2>
            <div class="search-box">
                <input type="text" 
                       id="drugSearch" 
                       class="input-field" 
                       placeholder="İlaç ara (örn: Aspirin)"
                       autocomplete="off"
                       aria-label="İlaç Arama">

            </div>
            
            <div id="searchResults" class="search-results scroll-fade">
                <div id="searchResultsContent" class="search-results-content"></div>
            </div>
            
            <div class="recent-searches" style="margin-top: 1rem;">
                <div style="font-size: 0.9rem; color: var(--text-secondary); margin-bottom: 0.5rem;">Son Aramalar</div>
                <div id="recentSearchesList" style="display: flex; flex-wrap: wrap; gap: 0.5rem;"></div>
            </div>
        </section>


        <!-- Drug Selection Section -->
        <section class="card scroll-hidden scroll-delay-3">
            <h2 class="sr-only">İlaç Seçimi</h2>
            <div class="drug-select-section">
                <div class="drug-select-container">
                    <div class="input-wrapper">
                        <input type="text" 
                               id="drug1" 
                               class="input-field" 
                               placeholder="Birinci İlaç"
                               autocomplete="off"
                               aria-label="Birinci İlaç">
                    </div>
                </div>
                
                <div class="drug-select-container">
                    <div class="input-wrapper">
                        <input type="text" 
                               id="drug2" 
                               class="input-field" 
                               placeholder="İkinci İlaç"
                               autocomplete="off"
                               aria-label="İkinci İlaç">
                    </div>
                </div>
            </div>
            
            <button class="btn btn-primary btn-block" onclick="checkInteraction()">
                Etkileşimi Kontrol Et
            </button>
        </section>
        
        <!-- 페이지 상단에 고정된 드러그 검색 결과 -->
        <div id="drug1List" class="drug-list">
            <div class="drug-items"></div>
        </div>
        <div id="drug2List" class="drug-list">
            <div class="drug-items"></div>
        </div>

        <!-- Result Section -->
        <section id="resultSection" class="result-section scroll-scale">
            <div id="result"></div>
        </section>
    </div>

    <!-- Floating Action Button -->
    <button class="fab" onclick="scrollToTop()" title="Başa Dön" aria-label="Başa Dön">
        ↑
    </button>

    <!-- Settings Button -->
    <button class="settings-fab" title="AI Ayarları" aria-label="AI Ayarları">
        ⚙️
    </button>

    <!-- Notify Message -->
    <span id="alertMessage" class="alert" role="alert"></span>
    
    <!-- Footer -->
    <footer class="footer">
        <div class="footer-container">
            <!-- Medical Disclaimer -->
            <div class="footer-disclaimer">
                <div class="disclaimer-content">
                    <h4>⚠️ Önemli Tıbbi Sorumluluk Reddi</h4>
                    <p>
                        Bu araç sadece eğitim ve bilgi amaçlıdır. Tıbbi tavsiye, teşhis veya tedavi amaçlı değildir.
                        İlaçlar veya tıbbi tedaviler hakkında herhangi bir karar vermeden önce her zaman kalifiye bir sağlık uzmanına danışın.
                        İlaç etkileşimleri karmaşık ve bireysel olabilir.
                    </p>
                </div>
            </div>

            <!-- Main Footer Content -->
            <div class="footer-content">
                <!-- About Section -->
                <div class="footer-section footer-about" style="padding-top: 2rem;">
                    <p>Güvenli ilaç kullanımını sağlamaya yardımcı olmak için ilaç etkileşimlerini kontrol etmek için kapsamlı bir araç. Tıbbi tavsiye için her zaman sağlık profesyonellerine danışın.</p>
                    <div class="footer-badges">
                        <span class="badge">Tıbbi Veritabanı</span>
                        <span class="badge">AI Destekli</span>
                        <span class="badge">Ücretsiz Araç</span>
                    </div>
                </div>

                <!-- Similar Sites -->
                <div class="footer-section footer-links">
                    <h4>Benzer Siteler</h4>
                    <div class="medical-links">
                        <a href="https://biolabs.world" target="_blank" rel="noopener">biolabs.world</a>
                    </div>
                </div>

                <!-- Medical Resources -->
                <div class="footer-section footer-resources">
                    <h4>Tıbbi Kaynaklar</h4>
                    <div class="medical-links">
                        <a href="https://www.titck.gov.tr" target="_blank" rel="noopener">TİTCK</a>
                        <a href="https://www.saglik.gov.tr" target="_blank" rel="noopener">Sağlık Bakanlığı</a>
                        <a href="https://www.who.int" target="_blank" rel="noopener">WHO</a>
                        <a href="https://medlineplus.gov" target="_blank" rel="noopener">MedlinePlus</a>
                    </div>
                </div>

                <!-- Contact & Social -->
                <div class="footer-section footer-contact">
                    <h4>Bize Ulaşın</h4>
                    <style>
                        h4 {
                            display: flex;
                            align-items: center;
                            justify-content: center;
                            align-items: center;
                            text-align: center;
                            font-size: 1rem;
                            font-weight: 600;
                            margin-bottom: 0.2rem;
                        }
                        a {
                            display: flex;
                            align-items: center;
                            justify-content: center;
                            align-items: center;
                            text-align: center;
                            font-size: 0.8rem;
                            color: var(--text-secondary);
                        }
                    </style>
                    <div class="social-links">
                        <a href="mailto:pistolinkr@icloud.com" title="Email">
                            <span>Email</span>
                        </a>
                        <a href="https://github.com/pistolinkr" target="_blank" rel="noopener" title="GitHub">
                            <span>GitHub</span>
                        </a>
                        <button class="feedback-btn" onclick="openFeedbackModal()" title="Geri Bildirim Gönder">
                            <span>Geri Bildirim</span>
        
                    </div>
                        </div>
                        </div>

            <!-- Footer Divider -->
            <div class="footer-divider"></div>

            <!-- Bottom Bar -->
            <div class="footer-bottom">
                <div class="footer-bottom-content">
                    <div class="footer-version-language">
                        <div class="footer-version">
                            <span>Beta v2.1 | G.gear® Pistol™</span>
                        </div>
                        <div class="footer-language">
                            <span class="current-language">🇹🇷 Türkçe</span>
                        </div>
                    </div>
                    <div class="footer-legal">
                        <a href="#" onclick="showPrivacyPolicy()">Gizlilik Politikası</a>
                        <a href="#" onclick="showTermsOfService()">Hizmet Şartları</a>
                        <a href="#" onclick="showDataSources()">Veri Kaynakları</a>
                            </div>
                    <div class="footer-copyright">
                        <p>&copy; 2025 Pistolinkr. All rights reserved.</p>
                    </div>
                </div>
            </div>
        </div>
    </footer>

    <!-- EmailJS SDK -->
    <script type="text/javascript" src="https://cdn.jsdelivr.net/npm/@emailjs/browser@4/dist/email.min.js"></script>
    <script src="../i18n.js"></script>
    <script src="config.js"></script>
    <script src="scripts.js"></script>
</body>
</html>

